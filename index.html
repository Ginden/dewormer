<html>
    <head>
        <title>
            Noninvasive debugger statement
        </title>
        <style>
            textarea {
                width: 600px;
                height: 500px;
            }
        </style>
    </head>
    <body>


        <script src="ugly-browser.js"></script>
        <script src="dewormer.js"></script>
        <table>
            <tr>
                <td>
                    <button id="transform">Invasive debbuger -> noninvasive</button>
                </td>
            </tr>
            <tr>
                <td>
                    <button id="beautify">Beautify output</button>
                </td>
            </tr>
            <tr>
                <td>
                    <textarea id="input">
            
                    </textarea>
                </td>
            </tr>
            <tr>
                <td>
                    <textarea id="output">
            
                    </textarea>
                </td>
            </tr>

        
        </table>
        <script>
        
            document.querySelector('#transform').onclick = function() {
                document.querySelector('#output').value = dewormer(document.querySelector('#input').value);
            }
            document.querySelector('#beautify').onclick = function() {
                var stream = UglifyJS.OutputStream({beautify: true, indent_level: 4, comments: true});
                var code = UglifyJS.parse(document.querySelector('#output').value).print(stream);
                document.querySelector('#output').value = stream.toString();
            };
            setTimeout(function() {
            if (!(document.querySelector('#input').value)) {
                document.querySelector('#input').value = document.querySelector('#my-little-code').innerHTML.trim();
            }
            }, 200);
        </script>
    </body>
</html>